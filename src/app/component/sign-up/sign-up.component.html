<div class="container" style="margin-top: 56px;" xmlns="http://www.w3.org/1999/html">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="row">
        <div class="col-12" *ngIf="!loading && !correct">
          <form [formGroup]="angularForm" novalidate>
            <div class="row">
              <div class="col-12 col-md-6">
                <section class="section mr-md-5">
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>Surname:</label>
                        <input class="form-control" formControlName="surname" type="text" [(ngModel)]="user.surname">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['surname'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['surname'].errors.required">
                          Surname is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>Name:</label>
                        <input class="form-control" formControlName="name" type="text" [(ngModel)]="user.name">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['name'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['name'].errors.required">
                          Name is required.
                        </div>
                        <div *ngIf="angularForm.controls['name'].errors.minlength">
                          minLength is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>Fiscal Code:</label>
                        <input class="form-control" formControlName="fiscalCode" type="text" [(ngModel)]="user.fiscalCode">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['fiscalCode'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['fiscalCode'].errors.required">
                          Fiscal Code is required.
                        </div>
                        <div *ngIf="angularForm.controls['fiscalCode'].errors.pattern">
                          Fiscal Code isn't correct.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-md-6">
                      <div class="form-group">
                        <label>Sex:</label>
                        <select class="custom-select form-control" formControlName="gender" [(ngModel)]="user.gender">
                          <option value="M">M</option>
                          <option value="F">F</option>
                          <option value="" selected></option>
                        </select>
                      </div>
                      <div *ngIf="submitted && angularForm.controls['gender'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['gender'].errors.required">
                          Sex is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="form-group">
                        <label>Date of Birth:</label>
                        <input class="form-control" formControlName="dateOfBirth" type="date" [(ngModel)]="user.dateOfBirth">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['dateOfBirth'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['dateOfBirth'].errors.required">
                          Date is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>Street:</label>
                        <input class="form-control" formControlName="street" type="text" [(ngModel)]="user.address.street">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['street'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['street'].errors.required">
                          Address is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-6">
                      <div class="form-group">
                        <label>House Number:</label>
                        <input class="form-control" formControlName="houseNumber" type="number" [(ngModel)]="user.address.houseNumber">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['houseNumber'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['houseNumber'].errors.required">
                          Is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="form-group">
                        <label>Zip Code:</label>
                        <input class="form-control" formControlName="zipCode" type="number" [(ngModel)]="user.address.zipCode">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['zipCode'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['zipCode'].errors.required">
                          Is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
              <div class="col-12 col-md-6">
                <section class="section">
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>Iban:</label>
                        <input class="form-control" formControlName="iban" type="text" [(ngModel)]="user.iban">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['iban'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['iban'].errors.required">
                          Iban is required.
                        </div>
                        <div *ngIf="angularForm.controls['iban'].errors.pattern">
                          Iban not correct.
                        </div>
                      </div>
                    </div>
                  </div>
                </section>
                <section class="section">
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label><label class="text-danger">*</label> Phone:</label>
                        <input class="form-control" type="number" [(ngModel)]="user.phone">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>E-mail:</label>
                        <input class="form-control" formControlName="email" type="text" (blur)="checkEmail()" (keyup)="checkEmail()" [(ngModel)]="user.email">
                      </div>
                      <div *ngIf="(submitted && angularForm.controls['email'].invalid )" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['email'].errors.required">
                          E-mail is required.
                        </div>
                        <div *ngIf="angularForm.controls['email'].errors.email">
                          E-mail is not correct.
                        </div>
                      </div>
                      <div *ngIf="emailUsed" class="alert alert-danger">
                        E-mail already used.
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <label>Username:</label>
                        <input class="form-control" formControlName="username" type="text" (blur)="checkUsername()" (keyup)="checkUsername()"  [(ngModel)]="user.username">
                      </div>
                      <div *ngIf="(submitted && angularForm.controls['username'].invalid)"   class="alert alert-danger">
                        <div *ngIf="angularForm.controls['username'].errors.required">
                          Username is required.
                        </div>
                      </div>
                      <div *ngIf="usernameUsed" class="alert alert-danger">
                        Username alredy used.
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-6">
                      <div class="form-group">
                        <label>Password:</label>
                        <input class="form-control" formControlName="password" type="password" [(ngModel)]="user.password">
                      </div>
                      <div *ngIf="angularForm.controls['password'].invalid && ( angularForm.controls['password'].touched)" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['password'].errors.required">
                          Is required.
                        </div>
                        <div *ngIf="angularForm.controls['password'].errors.pattern">
                          The password must have with at least a Upper Case letter, a number and a special caracters between #$^+=!*()@%&. Min length 6 max lenght 10.
                        </div>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="form-group">
                        <label>Password di conferma:</label>
                        <input class="form-control" formControlName="password2" type="password" [(ngModel)]="password2">
                      </div>
                      <div *ngIf="submitted && angularForm.controls['password2'].invalid" class="alert alert-danger">
                        <div *ngIf="angularForm.controls['password2'].errors.required">
                          Is required.
                        </div>
                        <div *ngIf="this.password2 !== this.user.password">
                          Password not equals.
                        </div>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
              </div>
            </div>
            <div class="row mt-5">
              <div class="col-12">
                <button type="submit"
                        class="btn btn-success btn-lg offset-5" (click)="onSubmit()">
                  Register
                </button>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-12">
                <p><label class="text-danger">* </label> Optional field</p>
              </div>
            </div>
          </form>
        </div>
        <div class="col-3 offset-4 justify-content-center mt-50" *ngIf="loading">
          <app-loading-animation></app-loading-animation>
        </div>
        <div class="col-12 justify-content-center mt-40 bg-success display-4 noauction" *ngIf="correct">
          Registrazione avvenuta con successo. A breve sarai reidirizzato.
        </div>
      </div>
    </div>
  </div>
</div>
  <!--<div class="row justify-content-center" *ngIf="state">
    <div class="col-12">[disabled]="angularForm.pristine || angularForm.invalid"&& (angularForm.controls['surname'].dirty || angularForm.controls['surname'].touched)
      <div class="form-group">
        <form  id="myForm2">
          <div class="row justify-content-center">
            <div class="col-12 col-sm-6">
              <label>Cognome: {{user.surname}}</label>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-12 col-sm-6">
              <label>Codice Fiscale: {{user.fiscalCode}}</label>
            </div>
            <div class="col-12 col-sm-6">
              <label>Data di Nascita: {{user.dateOfBirth}}</label>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-12">
              <label>Indirizzo: {{user.address.street}}</label>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-12 col-sm-6">
              <label>N° Civico: {{user.address.houseNumber}}</label>
            </div>
            <div class="col-12 col-sm-6">
              <label>CAP: {{user.address.zipCode}}</label>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-12 col-sm-6">
              <label>Phone: {{user.phone}}</label>
            </div>
            <div class="col-12 col-sm-6">
              <label>Iban: {{user.iban}}</label>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-12 col-sm-6">
              <label>Username: {{user.username}}</label>
            </div>
            <div class="col-12 col-sm-6">
              <label>E-Mail: {{user.email}}</label>
            </div>
          </div>
          <div class="row justify-content-center  m-5">
            <div class="form-group justify-content-center text-center">
              <button type="submit" class="btn btn-primary" (click)="saveUser()">Confirm</button>
            </div>
            <div class="form-group justify-content-center text-center">
              <button type="submit" class="btn btn-danger" (click)="changeState(false)">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>-->
